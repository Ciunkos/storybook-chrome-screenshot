{"version":3,"sources":["../../src/internal/logger.js"],"names":["log","console","createTitle","color","title","black","Logger","silent","debug","blank","spinner","stop","args","echo","blue","repeat","i","message","useSpinner","output","clear","text","setSpinnerString","start"],"mappings":";;;;;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;;;;;AAEA,IAAMA,MAAMC,QAAQD,GAApB,C,CAAyB;;AAElB,IAAME,oCAAc,SAAdA,WAAc,CAACC,KAAD,EAAQC,KAAR;AAAA,SACzB,gBAAMC,KAAN,QAAiB,sBAAUF,KAAV,CAAjB,QAAyCC,KAAzC,OADyB;AAAA,CAApB;;IAIcE,M;AACnB,kBAAYC,MAAZ,EAAoBC,KAApB,EAA2B;AAAA;;AACzB,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKC,KAAL,GAAaA,KAAb;AACD;;;;4BAEO;AACN,UAAI,CAAC,KAAKA,KAAN,IAAe,CAAC,KAAKD,MAAzB,EAAiC;AAC/B;AACD,OAFD,MAEO,IAAI,KAAKC,KAAT,EAAgB;AACrB,aAAKC,KAAL,CAAW,CAAX;AACD;;AAED,UAAI,KAAKC,OAAT,EAAkB;AAChB,aAAKA,OAAL,CAAaC,IAAb,CAAkB,IAAlB;AACD;AACF;;;2BAEa;AACZ,UAAI,CAAC,KAAKJ,MAAV,EAAkB;AAChBP;AACD;AACF;;;wBAEGI,K,EAAgB;AAClB,UAAI,KAAKI,KAAT,EAAgB;AAAA,0CADJI,IACI;AADJA,cACI;AAAA;;AACd,aAAKC,IAAL,mBACKX,YAAY,MAAZ,EAAoB,OAApB,CADL,EAEE,gBAAMY,IAAN,OAAeV,KAAf,OAFF,SAGKQ,IAHL;AAKD;AACF;;;4BAEiB;AAAA,UAAZG,MAAY,uEAAH,CAAG;;AAChB,WAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAID,MAApB,EAA4BC,KAAK,CAAjC,EAAoC;AAClC,aAAKH,IAAL;AACD;AACF;;;4BAEOV,K,EAAOC,K,EAAOa,O,EAA6B;AAAA,UAApBC,UAAoB,uEAAP,KAAO;;AACjD,UAAMC,SAAYjB,YAAYC,KAAZ,EAAmBC,KAAnB,CAAZ,SAAyCa,OAA/C;;AAEA,WAAKG,KAAL;;AAEA,UAAIF,cAAc,CAAC,KAAKX,MAApB,IAA8B,CAAC,KAAKC,KAAxC,EAA+C;AAC7C,aAAKE,OAAL,GAAe,wBAAY;AACzBW,gBAASF,MAAT,UADyB;AAEzBhB,iBAAO;AAFkB,SAAZ,CAAf;AAIA,aAAKO,OAAL,CAAaY,gBAAb,CAA8B,EAA9B;AACA,aAAKZ,OAAL,CAAaa,KAAb;AACD,OAPD,MAOO;AACL,aAAKV,IAAL,CAAUM,MAAV;AACD;AACF;;AAED;;;;0BACMF,O,EAAS;AACbhB,cAAQD,GAAR;AACAC,cAAQD,GAAR,CAAeE,YAAY,KAAZ,EAAmB,OAAnB,CAAf,SAA8Ce,OAA9C;AACAhB,cAAQD,GAAR;AACD;AACD;;;;;;;kBA/DmBM,M","file":"logger.js","sourcesContent":["import chalk from 'chalk';\r\nimport clear from 'clear';\r\nimport { Spinner } from '@tsuyoshiwada/cli-spinner';\r\nimport { pascalize } from './utils';\r\n\r\nconst log = console.log; // eslint-disable-line no-console\r\n\r\nexport const createTitle = (color, title) => (\r\n  chalk.black[`bg${pascalize(color)}`](` ${title} `)\r\n);\r\n\r\nexport default class Logger {\r\n  constructor(silent, debug) {\r\n    this.silent = silent;\r\n    this.debug = debug;\r\n  }\r\n\r\n  clear() {\r\n    if (!this.debug && !this.silent) {\r\n      clear();\r\n    } else if (this.debug) {\r\n      this.blank(2);\r\n    }\r\n\r\n    if (this.spinner) {\r\n      this.spinner.stop(true);\r\n    }\r\n  }\r\n\r\n  echo(...args) {\r\n    if (!this.silent) {\r\n      log(...args);\r\n    }\r\n  }\r\n\r\n  log(title, ...args) {\r\n    if (this.debug) {\r\n      this.echo(\r\n        `${createTitle('blue', 'DEBUG')}`,\r\n        chalk.blue(`[${title}]`),\r\n        ...args,\r\n      );\r\n    }\r\n  }\r\n\r\n  blank(repeat = 1) {\r\n    for (let i = 0; i < repeat; i += 1) {\r\n      this.echo();\r\n    }\r\n  }\r\n\r\n  section(color, title, message, useSpinner = false) {\r\n    const output = `${createTitle(color, title)} ${message}`;\r\n\r\n    this.clear();\r\n\r\n    if (useSpinner && !this.silent && !this.debug) {\r\n      this.spinner = new Spinner({\r\n        text: `${output} %s  `,\r\n        color: 'cyan',\r\n      });\r\n      this.spinner.setSpinnerString(18);\r\n      this.spinner.start();\r\n    } else {\r\n      this.echo(output);\r\n    }\r\n  }\r\n\r\n  /* eslint-disable no-console, class-methods-use-this */\r\n  error(message) {\r\n    console.log();\r\n    console.log(`${createTitle('red', 'ERROR')} ${message}`);\r\n    console.log();\r\n  }\r\n  /* eslint-enable */\r\n}\r\n"]}