{"version":3,"sources":["../../src/internal/store.js"],"names":["Store","filterKind","filterStory","setStories","stories","current","forEach","story","skipped","test","kind","isMultipleViewport","Array","isArray","viewport","vp","push","filename","filter"],"mappings":";;;;;;;;;;AAAA;;AACA;;;;;;;;IAEqBA,K;;;AACnB,iBAAYC,UAAZ,EAAwBC,WAAxB,EAAqC;AAAA;;AAAA;;AAEnC,UAAKD,UAAL,GAAkBA,UAAlB;AACA,UAAKC,WAAL,GAAmBA,WAAnB;AACA,UAAKC,UAAL,CAAgB,EAAhB;AAJmC;AAKpC;;;;+BAEUC,O,EAAS;AAAA;;AAClB,WAAKC,OAAL,GAAe,CAAf;AACA,WAAKD,OAAL,GAAe,EAAf;;AAEAA,cAAQE,OAAR,CAAgB,UAACC,KAAD,EAAW;AACzB,YAAMC,UACH,OAAKP,UAAL,IAAmB,CAAC,OAAKA,UAAL,CAAgBQ,IAAhB,CAAqBF,MAAMG,IAA3B,CAArB,IACC,OAAKR,WAAL,IAAoB,CAAC,OAAKA,WAAL,CAAiBO,IAAjB,CAAsBF,MAAMA,KAA5B,CAFxB;;AAKA,YAAMI,qBAAqBC,MAAMC,OAAN,CAAcN,MAAMO,QAApB,CAA3B;AACA,YAAMA,WAAWH,qBAAqBJ,MAAMO,QAA3B,GAAsC,CAACP,MAAMO,QAAP,CAAvD;;AAEAA,iBAASR,OAAT,CAAiB,UAACS,EAAD,EAAQ;AACvB,iBAAKX,OAAL,CAAaY,IAAb,cACKT,KADL;AAEEO,sBAAUC,EAFZ;AAGEP,4BAHF;AAIES,sBAAU,2BACRV,MAAMG,IADE,EAERH,MAAMA,KAFE,EAGRI,qBAAqBI,EAArB,GAA0B,IAHlB;AAJZ;AAUD,SAXD;AAYD,OArBD;AAsBD;;;iCAEY;AACX,aAAO,KAAKX,OAAL,CAAac,MAAb,CAAoB;AAAA,eAAS,CAACX,MAAMC,OAAhB;AAAA,OAApB,CAAP;AACD;;;wCAEmB;AAClB,aAAO,KAAKJ,OAAL,CAAac,MAAb,CAAoB;AAAA,eAASX,MAAMC,OAAf;AAAA,OAApB,CAAP;AACD;;;;;;kBA1CkBR,K","file":"store.js","sourcesContent":["import { EventEmitter } from 'events';\r\nimport { story2filename } from './utils';\r\n\r\nexport default class Store extends EventEmitter {\r\n  constructor(filterKind, filterStory) {\r\n    super();\r\n    this.filterKind = filterKind;\r\n    this.filterStory = filterStory;\r\n    this.setStories([]);\r\n  }\r\n\r\n  setStories(stories) {\r\n    this.current = 0;\r\n    this.stories = [];\r\n\r\n    stories.forEach((story) => {\r\n      const skipped = (\r\n        (this.filterKind && !this.filterKind.test(story.kind)) ||\r\n        (this.filterStory && !this.filterStory.test(story.story))\r\n      );\r\n\r\n      const isMultipleViewport = Array.isArray(story.viewport);\r\n      const viewport = isMultipleViewport ? story.viewport : [story.viewport];\r\n\r\n      viewport.forEach((vp) => {\r\n        this.stories.push({\r\n          ...story,\r\n          viewport: vp,\r\n          skipped,\r\n          filename: story2filename(\r\n            story.kind,\r\n            story.story,\r\n            isMultipleViewport ? vp : null,\r\n          ),\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  getStories() {\r\n    return this.stories.filter(story => !story.skipped);\r\n  }\r\n\r\n  getSkippedStories() {\r\n    return this.stories.filter(story => story.skipped);\r\n  }\r\n}\r\n"]}